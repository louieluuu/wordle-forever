// TODO1 means check if these styles are any different than the desktops.

// The $ratio uses the full, original SVG dimensions.

// To change the SVG size in this CSS file, you just need to
// change the width, and the height will follow the ratio.

@use "sass:math";
$ratio: math.div(508.83, 411);
$platinum-ratio: math.div(508.83, 791.64);

$stopwatch-width: 150px;
$stopwatch-height: $stopwatch-width * $ratio;

@mixin phone-styles-stats {
  $phone-small-text: 1.9dvh;

  .stats {
    &__container {
      // TODO1
      // Make the page stretch to the bottom.
      flex: 1;
      justify-content: space-around;

      width: 92.5vw;

      margin-block: 1dvh;
    }

    &__header {
      &--username {
        font-size: 5dvh;
      }

      &--title {
        font-size: 3.1dvh;
      }
    }

    &__stopwatch {
      font-size: 12.5dvh;

      padding-top: 1dvh;
      padding-bottom: 1.75dvh;

      &--icon {
        gap: 1rem;
      }

      &--caption {
        font-size: $phone-small-text;
        font-weight: 400;
      }
    }

    &__secondary__container {
      flex-direction: column;
    }

    &__total-games {
      $phone-games-icon-size: 3dvh;

      font-size: $phone-games-icon-size;
      margin-bottom: 0;

      &--icon {
        width: $phone-games-icon-size;
        height: $phone-games-icon-size;
      }
    }

    &__game-info {
      font-size: $phone-small-text;

      &--wins,
      &--solves {
        &--total {
          font-size: 5dvh;

          &--percent {
            font-size: 3.5dvh;
          }
        }
      }
    }

    &__game-mode {
      font-size: 12dvh;

      &--top,
      &--bot {
        &--total {
          font-size: 5dvh;
        }

        &--text {
          font-size: $phone-small-text;
        }
      }
    }

    &__guesses {
      &--misc {
        gap: 1dvh;

        &--title {
          font-size: $phone-small-text;
        }

        &--total {
          font-size: 4.3dvh;
        }
      }
    }
  }

  .svg-stopwatch {
    $phone-stopwatch-width: 13dvh;
    $phone-stopwatch-height: $phone-stopwatch-width * $ratio;

    // Unfortunately, because of the platinum stopwatch's wings, the dimensions are different.
    $phone-stopwatch-platinum-width: 25dvh;
    $phone-stopwatch-platinum-height: $phone-stopwatch-platinum-width *
      $platinum-ratio;

    width: $phone-stopwatch-width;
    height: $phone-stopwatch-height;

    &--platinum {
      width: $phone-stopwatch-platinum-width;
      height: $phone-stopwatch-platinum-height;
    }

    &__text {
      width: $phone-stopwatch-width;
      height: $phone-stopwatch-height;

      // Note: rem is more consistent than dvh here.
      font-size: 9rem;
      font-weight: 600;

      &--platinum {
        width: $phone-stopwatch-platinum-width;
        height: $phone-stopwatch-platinum-height;

        // Note: rem is more consistent than dvh here.
        font-size: 9rem;
        font-weight: 600;
      }
    }
  }

  .distribution {
    &__container {
      margin-top: 1dvh;
      font-size: $phone-small-text;
    }
  }
}

// Large screens
.stats {
  $desktop-small-text: 1.3rem;

  &__container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    // Looks much nicer than Roboto on this particular page.
    font-family: "Segoe UI";

    margin-block: 0.5rem;
  }

  &__tabs {
    display: flex;
    flex-direction: column;
  }

  &__header {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    line-height: 1.2;

    &--username {
      font-size: 4rem;
      font-weight: 800;
    }

    &--title {
      font-size: 1.5rem;
      font-family: "Roboto Slab";
    }
  }

  &__stopwatch {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    // For the { } surrounding the stopwatch.
    font-family: "Roboto";

    font-size: 9rem;
    font-weight: 500;
    line-height: 1;

    padding-top: 1rem;
    padding-bottom: 1.75rem;

    &--icon {
      display: flex;
      flex-direction: row;
      align-items: center;

      gap: 2rem;
    }

    &--caption {
      font-family: "Segoe UI";
      font-size: $desktop-small-text;
      font-weight: 100;
      line-height: 0.5;
    }
  }

  &__secondary__container {
    display: flex;
    flex-direction: row;
    width: 100%;

    &--subcontainer {
      display: flex;
      flex-direction: column;
    }
  }

  &__total-games {
    $desktop-games-icon-size: 2.5rem;

    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;

    font-weight: 800;
    font-size: $desktop-games-icon-size;

    margin-bottom: 1rem;

    &--icon {
      display: flex;
      width: $desktop-games-icon-size;
      height: $desktop-games-icon-size;
    }

    &--total {
      display: flex;
      font-style: italic;
      opacity: 90%;
    }
  }

  &__game-stats {
    display: flex;
    flex-direction: row;
    width: 100%;

    justify-content: space-around;
    align-items: center;

    line-height: 1;
  }

  &__game-info {
    display: flex;
    flex-direction: column;

    gap: 1dvh;

    font-size: $desktop-small-text;

    // Styles shared by both wins and solves
    &--wins,
    &--solves {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;

      &--total {
        display: flex;
        align-items: center;

        font-size: 3rem;
        font-weight: 800;
        font-style: italic;

        &--percent {
          display: flex;
          text-shadow: none;
          opacity: $stats-percent-opacity;

          font-size: 2rem;
        }
      }
    }

    // Specific colors for wins and solves
    &--wins {
      &--total {
        color: $wins;
        text-shadow: 0px 0.3dvh 0px $wins-shadow;
      }
    }
    &--solves {
      &--total {
        color: $solves;
        text-shadow: 0px 0.3dvh 0px $solves-shadow;
      }
    }
  }

  &__game-mode {
    display: flex;
    flex-direction: row;
    align-items: center;

    font-size: 7rem;

    &--numbers {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;

      gap: 1dvh;
    }

    // Originally I'd planned for the top and bot to be different colors,
    // but it looks pretty good with just black.
    &--top,
    &--bot {
      display: flex;
      flex-direction: column;
      align-items: center;

      &--total {
        display: flex;

        font-size: 3rem;
        font-weight: 800;
        font-style: italic;
        text-shadow: 0px 0.3dvh 0px $text-shadow;
      }

      &--text {
        display: flex;
        align-items: center;

        font-size: $desktop-small-text;
      }
    }
  }

  &__guesses {
    display: flex;
    flex-direction: row;
    justify-content: space-around;
    align-items: center;

    width: 100%;

    &--misc {
      display: flex;
      flex-direction: column;
      gap: 1rem;

      &--average,
      &--oog {
        display: flex;
        flex-direction: column;
        text-align: center;
      }

      &--title {
        font-size: $desktop-small-text;
        line-height: 1;
      }

      &--total {
        font-family: "Roboto";
        font-size: 2.5rem;
        font-style: italic;
      }
    }
  }
}

// Not actually under the .stats umbrella
.svg-stopwatch {
  width: $stopwatch-width;
  height: $stopwatch-height;

  // Both stroke and fill are necessary for different parts of the SVG. (Stroke for lines, fill for isolated shapes.)
  &--none {
    @extend .svg-stopwatch;
    stroke: $bg-main-near-invisible;
    fill: $bg-main-near-invisible;
  }

  &--bronze {
    @extend .svg-stopwatch;
    stroke: $stopwatch-bronze;
    fill: $stopwatch-bronze;
    filter: drop-shadow(
      0px $stopwatch-shadow-height 2px $stopwatch-bronze-shadow
    );
  }

  &--silver {
    @extend .svg-stopwatch;
    stroke: $stopwatch-silver;
    fill: $stopwatch-silver;
    filter: drop-shadow(
      0px $stopwatch-shadow-height 2px $stopwatch-silver-shadow
    );
  }

  &--gold {
    @extend .svg-stopwatch;
    stroke: $stopwatch-gold;
    fill: $stopwatch-gold;
    filter: drop-shadow(
      0px $stopwatch-shadow-height 2px $stopwatch-gold-shadow
    );
  }

  &--platinum {
    @extend .svg-stopwatch;
    stroke: $stopwatch-platinum;
    fill: $stopwatch-platinum;
    filter: drop-shadow(
      0px $stopwatch-shadow-height 2px $stopwatch-platinum-shadow
    );
  }

  &__text {
    width: $stopwatch-width;
    height: $stopwatch-height;

    font-family: "Roboto Slab";
    font-weight: bold;
    fill: $color;

    &--none {
      @extend .svg-stopwatch__text;
      letter-spacing: 1rem;
    }

    &--platinum {
      @extend .svg-stopwatch__text;
    }
  }
}

.distribution {
  &__container {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
  }

  &__row {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.5rem;
  }

  &__bar {
    color: hsl(240, 3%, 7%);
    text-align: right;
    padding-right: 0.25rem;

    font-weight: 600;

    background: linear-gradient(
      to right,
      hsl(180, 100%, 66%),
      hsl(39, 100%, 50%)
    );
  }
}
